<!DOCTYPE html>
<html>
<head>
  <title>üêù SOLAXY Kontrol Paneli</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background: black;
      color: white;
      font-family: sans-serif;
    }

    .frame {
      border-left: 8px solid #ff6600;
      border-top: 8px solid #00cc66;
      border-right: 8px solid #ff6600;
      border-bottom: 6px solid #00cc66;
      height: calc(100vh - 60px);
      box-sizing: border-box;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .panel {
      text-align: center;
    }

    h1 {
      color: #FFD700;
      margin-bottom: 30px;
    }

    input#question,
    textarea#responseBox {
      width: 400px;
      height: 100px;
      padding: 12px;
      font-size: 18px;
      border-radius: 10px;
      border: none;
      margin-bottom: 20px;
      outline: none;
      box-sizing: border-box;
    }

    input#question {
      background-color: white;
      color: black;
    }

    textarea#responseBox {
      background-color: white;
      color: black;
      resize: none;
    }

    button {
      padding: 20px 40px;
      font-size: 20px;
      margin: 10px;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    #solaxyBtn { background: #00cc66; color: black; }
    #micBtn    { background: #ff6600; color: black; }

    button:hover {
      transform: translateY(2px);
      box-shadow: inset 0 2px 6px rgba(0,0,0,0.3);
    }

    .below-frame {
      text-align: center;
      font-size: 28px;
      font-weight: bold;
      margin-top: 10px;
    }

    .green { color: #00cc66; }
  </style>
</head>
<body>
  <div class="frame">
    <div class="panel">
      <h1>üêù <span style="color: white;">SOLAXY</span> Kontrol Paneli</h1>

      <input type="text" id="question" placeholder="Sorunu buraya yaz..."><br>

      <button id="solaxyBtn" onclick="startAnalysis('SOLAXY')">SOLAXY</button>
      <button id="micBtn" onclick="startListening()">üé§ Konu≈ü</button><br>

      <textarea id="responseBox" readonly placeholder="Cevap burada g√∂r√ºnecek..."></textarea>
    </div>
  </div>

  <div class="below-frame">
    <span class="green">SOLAXY AI</span>
  </div>

  <script>
    const responseBox = document.getElementById("responseBox");
    const inputBox = document.getElementById("question");

    const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
    recognition.lang = 'tr-TR';
    recognition.continuous = false;
    recognition.interimResults = false;

    function startListening() {
      recognition.start();
      responseBox.value = "üé§ Dinleniyor...";
    }

    recognition.onresult = function (event) {
      const transcript = event.results[0][0].transcript;
      inputBox.value = transcript;
      startAnalysis("SOLAXY");
    };

    recognition.onerror = function (event) {
      responseBox.value = "‚ùå Ses tanƒ±ma hatasƒ±: " + event.error;
    };

    function startAnalysis(token) {
      const input = inputBox.value;
      responseBox.value = "‚è≥ Bekleniyor...";

      fetch("https://n8n.muratocak.net/webhook/run_analysis", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({ token, input })
      })
      .then(res => res.json())
      .then(data => {
        responseBox.value = data.message || "‚úÖ Cevap geldi ama bo≈ü.";
      })
      .catch(err => {
        responseBox.value = "‚ùå Hata: " + err.message;
      });
    }
  </script>
</body>
</html>
